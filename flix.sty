\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{flix}[2021/11/24 Flix]

\RequirePackage{listings}
\RequirePackage{xcolor}

\definecolor{linenumber-color}{RGB}{170, 170, 170}
\definecolor{code-color}{RGB}{0, 0, 0}
\definecolor{keyword-color}{RGB}{155, 70, 147}
\definecolor{type-color}{RGB}{72, 118, 158}
\definecolor{comment-color}{RGB}{55, 55, 55}
\definecolor{identifier-color}{RGB}{55, 55, 55}

\lstdefinelanguage{flix}{
  basicstyle        = \ttfamily\footnotesize\color{code-color},
  numberstyle       = \footnotesize\color{linenumber-color},
  keywordstyle      = \color{keyword-color}\bfseries,
  commentstyle      = \color{comment-color},
  identifierstyle   = \idstyle,
  emph              = [1]{Unit, Bool, Char, Float32, Float64, Int8, Int16, Int32, Int64, String},
  emphstyle         = [1]{\color{type-color}},
  showspaces        = false,
  showstringspaces  = false,
  numbers           = left,
  xleftmargin       = 0.5cm,
  morecomment       = [l]{//},
  morecomment       = [n]{/*}{*/},
  morestring        = [b]",
  morestring        = [b]',
  morestring        = [b]""",
  morekeywords      = {
    alias,
    and,
    as,
    case,
    chan,
    class,
    def,
    deref,
    else,
    enum,
    false,
    fix,
    force,
    from,
    if,
    instance,
    into,
    law,
    lazy,
    let,
    match,
    namespace,
    new,
    not,
    opaque,
    or,
    project,
    pub,
    query,
    ref,
    select,
    solve,
    spawn,
    true,
    type,
    use
  },
}

\makeatletter
\newcommand*\idstyle{%
        \expandafter\id@style\the\lst@token\relax
}
\def\id@style#1#2\relax{%
        \ifcat#1\relax\else
                \ifnum`#1=\lccode`#1%
                        \color{identifier-color}
                \fi
        \fi
}
\makeatother
